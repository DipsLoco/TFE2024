{% extends 'base.html' %}
{% block content %}
<div class="container my-5">
    <div class="row justify-content-center">
        <div class="col-md-6">
            <div class="card shadow-lg">
                <div class="card-header bg-dark text-white text-center">
                    <h3>Modifier mon mot de passe</h3>
                </div>
                <div class="card-body">
                    {% if messages %}
                        <div class="alert alert-success">
                            {% for message in messages %}
                                <p>{{ message }}</p>
                            {% endfor %}
                        </div>
                    {% endif %}
                    <form method="POST">
                        {% csrf_token %}
                        
                        <!-- Mot de passe actuel -->
                        <div class="form-group">
                            <label for="current_password">Mot de passe actuel</label>
                            <input type="password" class="form-control" id="current_password" name="current_password" required>
                        </div>
                        
                        <!-- Nouveau mot de passe -->
                        <div class="form-group">
                            <label for="new_password1">Nouveau mot de passe</label>
                            <div class="input-group">
                                <input type="password" class="form-control" id="new_password1" name="new_password1" required>
                                <div class="input-group-append">
                                    <span class="input-group-text" id="eyeIcon" style="cursor: pointer;">
                                        <i class="fas fa-eye"></i>
                                    </span>
                                </div>
                            </div>
                        </div>

                        <!-- Confirmation du nouveau mot de passe -->
                        <div class="form-group">
                            <label for="new_password2">Confirmer le nouveau mot de passe</label>
                            <div class="input-group">
                                <input type="password" class="form-control" id="new_password2" name="new_password2" required>
                                <div class="input-group-append">
                                    <span class="input-group-text" id="eyeIcon2" style="cursor: pointer;">
                                        <i class="fas fa-eye"></i>
                                    </span>
                                </div>
                            </div>
                        </div>

                        <!-- Bouton de soumission -->
                        <button type="submit" class="btn btn-custom btn-md d-block mx-auto mt-3">Enregistrer les modifications</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <br><br><br><br><br><br><br><br><br><br>
</div>

<script>
    // Fonction pour afficher/masquer le mot de passe
    document.getElementById('eyeIcon').addEventListener('click', function() {
        let passwordField = document.getElementById('new_password1');
        if (passwordField.type === 'password') {
            passwordField.type = 'text';
            this.innerHTML = '<i class="fas fa-eye-slash"></i>';  // Change l'icône
        } else {
            passwordField.type = 'password';
            this.innerHTML = '<i class="fas fa-eye"></i>';  // Rechange l'icône
        }
    });

    document.getElementById('eyeIcon2').addEventListener('click', function() {
        let passwordField = document.getElementById('new_password2');
        if (passwordField.type === 'password') {
            passwordField.type = 'text';
            this.innerHTML = '<i class="fas fa-eye-slash"></i>';  // Change l'icône
        } else {
            passwordField.type = 'password';
            this.innerHTML = '<i class="fas fa-eye"></i>';  // Rechange l'icône
        }
    });
</script>

{% endblock %}

<style>
    .btn-custom {
        background-color: #28a745 !important;  /* Couleur verte */
        color: white;
        padding: 10px 20px;  /* Espacement autour du texte */
        font-size: 16px;  /* Taille du texte */
        border-radius: 5px;  /* Coins arrondis */
        border: none;  /* Supprimer la bordure */
        margin-top: 20px;  /* Espacement en haut */
        display: block;
        margin-left: auto;
        margin-right: auto;
    }
    
    .btn-custom:hover {
        background-color: #218838 !important;  /* Couleur verte plus foncée au survol */
    }
    
    .input-group .input-group-append .input-group-text {
        background-color: #f1f1f1;  /* Fond gris clair pour l'icône */
    }

    .input-group input {
        padding-right: 40px;  /* Ajouter un espace pour l'icône */
    }

    .input-group-append {
        position: absolute;
        right: 0;
        top: 0;
        bottom: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 0 10px;
        cursor: pointer;
    }
</style>
